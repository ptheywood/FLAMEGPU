<?xml version="1.0" encoding="utf-8"?>
<gpu:xmodel xmlns:gpu="http://www.dcs.shef.ac.uk/~paul/XMMLGPU" xmlns="http://www.dcs.shef.ac.uk/~paul/XMML">
  <name>HostAgentCreation</name>
  <gpu:environment>
    <gpu:constants>
      <gpu:variable>
        <type>unsigned int</type>
        <name>A_POP</name>
        <defaultValue>1</defaultValue>
      </gpu:variable>
      <gpu:variable>
        <type>unsigned int</type>
        <name>B_POP</name>
        <defaultValue>1</defaultValue>
      </gpu:variable>
    </gpu:constants>
    <gpu:functionFiles>
      <file>functions.c</file>
    </gpu:functionFiles>
    <gpu:initFunctions>
      <gpu:initFunction>
        <gpu:name>generatePopulations</gpu:name>
      </gpu:initFunction>
    </gpu:initFunctions>
    <gpu:exitFunctions>
      <gpu:exitFunction>
        <gpu:name>exitFunction</gpu:name>
      </gpu:exitFunction>
    </gpu:exitFunctions>
  </gpu:environment>
  <xagents>
    <gpu:xagent>
      <name>A</name>
      <memory>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>AOutput</name>
          <currentState>A</currentState>
          <nextState>A</nextState>
          <outputs>
            <gpu:output>
              <messageName>A_msg</messageName>
              <gpu:type>single_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
        <gpu:function>
          <name>AInput</name>
          <currentState>A</currentState>
          <nextState>A</nextState>
          <inputs>
            <gpu:input>
              <messageName>B_msg</messageName>
            </gpu:input>
          </inputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>A</name>
        </gpu:state>
        <initialState>A</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>256</gpu:bufferSize>
    </gpu:xagent>

    <gpu:xagent>
      <name>B</name>
      <memory>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>count</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>BInputOutput</name>
          <currentState>B</currentState>
          <nextState>B</nextState>
          <inputs>
            <gpu:input>
              <messageName>A_msg</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>B_msg</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>B</name>
        </gpu:state>
        <initialState>B</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>256</gpu:bufferSize>
    </gpu:xagent>
  </xagents>
  <messages>
    <gpu:message>
      <name>A_msg</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>tid</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone></gpu:partitioningNone>
      <gpu:bufferSize>256</gpu:bufferSize>
    </gpu:message>
    <gpu:message>
      <name>B_msg</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>tid</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>count</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone></gpu:partitioningNone>
      <gpu:bufferSize>256</gpu:bufferSize>
    </gpu:message>
  </messages>
  <layers>
    <layer>
      <gpu:layerFunction>
        <name>AOutput</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>BInputOutput</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>AInput</name>
      </gpu:layerFunction>
    </layer>
  </layers>
</gpu:xmodel>
